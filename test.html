<!DOCTYPE html>
<html>

<head></head>

<body>
    <script>
        var containsNearbyAlmostDuplicate = function (nums, k, t) {
            let bucket = {}, w = t + 1;
            for (let i = 0; i < nums.length; i++) {
                idx = Math.floor(nums[i] / w);
                console.log(idx)
                if (bucket.hasOwnProperty(idx)) return true;
                else if (bucket.hasOwnProperty(idx + 1) && Math.abs(nums[i] - bucket[idx + 1]) < w) return true;
                else if (bucket.hasOwnProperty(idx - 1) && Math.abs(nums[i] - bucket[idx - 1]) < w) return true;
                bucket[idx] = nums[i];
                if (i >= k) {
                    delete bucket[Math.floor(nums[i - k] / w)];
                }
            }
            return false;
        };
        console.log('ans', containsNearbyAlmostDuplicate([2147483647, -1, 2147483647], 1, 2147483647))
    </script>
</body>

</html>